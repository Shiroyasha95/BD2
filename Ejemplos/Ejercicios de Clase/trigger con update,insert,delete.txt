CREATE OR REPLACE TRIGGER TG_CATEGORIAS
AFTER INSERT OR UPDATE OR DELETE ON CATEGORIES
FOR EACH ROW

DECLARE
 
BEGIN 
--INSERTTING retorna un valor true o false 
  IF (INSERTING) THEN 
     INSERT INTO BITACORAS VALUES(SQ_BITACORAS.NEXTVAL,'SE REALIZO UN INSERT EN LA TABLA CATEGORIAS Y EL DATO NUEVO
     EN EL ID ES: '||:NEW.CATEGORY_ID || ' Y EL NOMBRE DE LA CATEGORIA ES: '||:NEW.CATEGORY_NAME, SYSTIMESTAMP,USER,'OPERACION INSERT');
  END IF;
  IF(UPDATING) THEN 
     INSERT INTO BITACORAS VALUES(SQ_BITACORAS.NEXTVAL,'SE REALIZO UN UPDATE EN LA TABLA CATEGORIAS Y EL DATO NUEVO
     EL NOMBRE DE LA CATEGORIA ANTERIOR ES: '||:OLD.CATEGORY_NAME ||' Y EL VALOR NUEVO DE LA CATEGORIA ES: '||:NEW.CATEGORY_NAME,
     SYSTIMESTAMP,USER,'OPERACION UPDATE');
  END IF;
  IF(DELETING) THEN
    INSERT INTO BITACORAS VALUES(SQ_BITACORAS.NEXTVAL,'SE REALIZO UN DELETE EN LA TABLA CATEGORIAS Y EL DATO ELIMINADO
    EN EL ID ERA: '||:OLD.CATEGORY_ID ||' Y EL NOMBRE DE LA CATEGORIA ERA: '||:OLD.CATEGORY_NAME, SYSTIMESTAMP,USER,'OPERACION DELETE');
  END IF;
END;


BEGIN
  DELETE FROM CATEGORIES WHERE CATEGORY_NAME='BICICLETA HOLANDESA';
COMMIT;
END;
