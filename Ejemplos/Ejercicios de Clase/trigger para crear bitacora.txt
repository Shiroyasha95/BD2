--trigger para crear una bitacora
CREATE TABLE BITACORAS(
 PK_COD_BITACORA NUMBER PRIMARY KEY,
 DESCRIPCION VARCHAR2(2000),
 FECHA_HORA TIMESTAMP,
 USUARIO VARCHAR2(100),
 OPERACION VARCHAR2(50)
);

CREATE SEQUENCE SQ_BITACORAS
START WITH 1
INCREMENT BY 1;

--el trigger se va ejecutar desde la tabla categorias
CREATE OR REPLACE TRIGGER TG_CATEGORIAS
AFTER INSERT ON CATEGORIES
FOR EACH ROW

DECLARE
 PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN 
  INSERT INTO BITACORAS VALUES(SQ_BITACORAS.NEXTVAL,'SE REALIZO UN INSERT EN LA TABLA CATEGORIAS Y EL DATO NUEVO
  EN EL ID ES: '||:NEW.CATEGORY_ID || 'Y EL NOMBRE DE LA CATEGORIA ES: '||:NEW.CATEGORY_NAME, SYSTIMESTAMP,USER,'OPERACION INSERT');
  COMMIT;
  
  EXCEPTION
   WHEN OTHERS THEN 
      ROLLBACK;
END;

BEGIN
INSERT INTO CATEGORIES (CATEGORY_NAME) VALUES ('BICICLETAS DE PISTA');
COMMIT;
END;