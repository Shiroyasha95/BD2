--crear un procedimiento almacenado que inserte valores

CREATE OR REPLACE PROCEDURE SP_INSERTA_PRODUCT (NOMBRE_PROD VARCHAR2, ID_BRAND NUMBER, CAT_ID NUMBER, 
ANIO_MODELO NUMBER,PRECIO NUMBER, MSJ_ERROR OUT VARCHAR2, MSJ_EXITO OUT VARCHAR2)
IS
  --almacene el valor maximo del id de producto
  VAL_MAX_PROD_ID NUMBER;
  
BEGIN
  --CONTROL PARA LA LLAVE PRIMARIA
  SELECT MAX((PRODUCT_ID)+1) INTO VAL_MAX_PROD_ID FROM PRODUCTS;
  INSERT INTO PRODUCTS VALUES(VAL_MAX_PROD_ID,NOMBRE_PROD,ID_BRAND,CAT_ID,ANIO_MODELO,PRECIO);
  COMMIT;
  
  MSJ_EXITO:='LA INSERCION DEL PRODUCTO FUE EXITOSA';
  
  EXCEPTION 
     WHEN OTHERS THEN
     MSJ_ERROR:= SQLERRM;
  
END;

DECLARE
  MSJ_ERROR VARCHAR2(500);
  MSJ_EXITO VARCHAR2(500);
BEGIN
  SP_INSERTA_PRODUCT('BICICLETA DE MONTAÃ‘A',18,4,2019,4345,MSJ_ERROR,MSJ_EXITO);
  DBMS_OUTPUT.put_line(MSJ_EXITO||' '||MSJ_ERROR);
END;
