--cursores ejemplo 3
--tener varios registros de varios atributos y tablas
DECLARE
   CURSOR CDATOS_PRODUCTO IS SELECT PRODUCTS.PRODUCT_NAME,CATEGORIES.CATEGORY_NAME,PRODUCTS.MODEL_YEAR FROM PRODUCTS INNER JOIN CATEGORIES 
   ON PRODUCTS.CATEGORY_ID=CATEGORIES.CATEGORY_ID;
   --ROWTYPE mapea los mismos campos en el mismo orden con el mismo tipo de datos
   REGISTRO CDATOS_PRODUCTO%ROWTYPE;

BEGIN

   OPEN CDATOS_PRODUCTO;
   LOOP
   --FETCH posiciona los registros 
   FETCH CDATOS_PRODUCTO INTO REGISTRO;
   --NOTFOUND retorna true o false, se deteiene cuando ya no hay mas registros 
   EXIT WHEN CDATOS_PRODUCTO%NOTFOUND;
   DBMS_OUTPUT.PUT_LINE('EL NOMBRE DEL PRODUCTO ES: '|| REGISTRO.PRODUCT_NAME);
   DBMS_OUTPUT.PUT_LINE('EL MODELO DEL PRODUCTO ES: '|| REGISTRO.MODEL_YEAR);
   DBMS_OUTPUT.PUT_LINE('LA CATEGORIA DEL PRODUCTO ES: '|| REGISTRO.CATEGORY_NAME);
   DBMS_OUTPUT.PUT_LINE(CHR(13));--salto de linea PORQUE 13?
   --DBMS_OUTPUT.PUT_LINE('LA CANTIDAD DE REGISTROS ES: '||CDATOS_PRODUCTO%ROWCOUNT);
   END LOOP;
   CLOSE CDATOS_PRODUCTO;
END;